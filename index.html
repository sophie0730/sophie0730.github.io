<!DOCTYPE html>
<html lang="en" dir="auto">

<head>
	<meta name="generator" content="Hugo 0.124.1"><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Hsuan-Ni&#39;s blog</title>
<meta name="keywords" content="Blog, Portfolio, PaperMod">
<meta name="description" content="ä¸€äº›è·Ÿè»Ÿé«”å·¥ç¨‹ç›¸é—œçš„ç­†è¨˜å€">
<meta name="author" content="Hsuan-Ni Hsu">
<link rel="canonical" href="https://sophie0730.github.io/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.70bbd05c33a713a41e18cdd9618263df3acf500c51ff5678446b2c84e92342c8.css" integrity="sha256-cLvQXDOnE6QeGM3ZYYJj3zrPUAxR/1Z4RGsshOkjQsg=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://sophie0730.github.io/%3Clink%20/%20abs%20url%3E">
<link rel="icon" type="image/png" sizes="16x16" href="https://sophie0730.github.io/%3Clink%20/%20abs%20url%3E">
<link rel="icon" type="image/png" sizes="32x32" href="https://sophie0730.github.io/%3Clink%20/%20abs%20url%3E">
<link rel="apple-touch-icon" href="https://sophie0730.github.io/%3Clink%20/%20abs%20url%3E">
<link rel="mask-icon" href="https://sophie0730.github.io/%3Clink%20/%20abs%20url%3E">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" type="application/rss+xml" href="https://sophie0730.github.io/index.xml">
<link rel="alternate" type="application/json" href="https://sophie0730.github.io/index.json">
<link rel="alternate" hreflang="en" href="https://sophie0730.github.io/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="Hsuan-Ni&#39;s blog" />
<meta property="og:description" content="ä¸€äº›è·Ÿè»Ÿé«”å·¥ç¨‹ç›¸é—œçš„ç­†è¨˜å€" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://sophie0730.github.io/" />
<meta property="og:image" content="https://sophie0730.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E" />
<meta property="og:site_name" content="Hsuan-Ni&#39;s blog" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://sophie0730.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E" />
<meta name="twitter:title" content="Hsuan-Ni&#39;s blog"/>
<meta name="twitter:description" content="ä¸€äº›è·Ÿè»Ÿé«”å·¥ç¨‹ç›¸é—œçš„ç­†è¨˜å€"/>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Organization",
  "name": "Hsuan-Ni's blog",
  "url": "https://sophie0730.github.io/",
  "description": "ä¸€äº›è·Ÿè»Ÿé«”å·¥ç¨‹ç›¸é—œçš„ç­†è¨˜å€",
  "thumbnailUrl": "https://sophie0730.github.io/%3Clink%20/%20abs%20url%3E",
  "sameAs": [
      "https://github.com/sophie0730", "https://www.linkedin.com/in/hsuan-ni-hsu/", "mailto:sophy010017@gmail.com"
  ]
}
</script>
</head>

<body class="list" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://sophie0730.github.io/" accesskey="h" title="Hsuan-Ni&#39;s blog (Alt + H)">
                <img src="https://sophie0730.github.io/apple-touch-icon.png" alt="" aria-label="logo"
                    height="35">Hsuan-Ni&#39;s blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://sophie0730.github.io/posts/" title="Posts">
                    <span>Posts</span>
                </a>
            </li>
            <li>
                <a href="https://sophie0730.github.io/categories/" title="Categories">
                    <span>Categories</span>
                </a>
            </li>
            <li>
                <a href="https://sophie0730.github.io/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://sophie0730.github.io/archives/" title="Archives">
                    <span>Archives</span>
                </a>
            </li>
            <li>
                <a href="https://sophie0730.github.io/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="https://sophie0730.github.io/about/" title="About Me">
                    <span>About Me</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main"> 
<article class="first-entry home-info">
    <header class="entry-header">
        <h1>Hi there ğŸ‘‹</h1>
    </header>
    <div class="entry-content">
        Welcome to my blog
    </div>
    <footer class="entry-footer">
        <div class="social-icons" >
    <a href="https://github.com/sophie0730" target="_blank" rel="noopener noreferrer me"
        title="Github">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
    stroke-linecap="round" stroke-linejoin="round">
    <path
        d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22">
    </path>
</svg>
    </a>
    <a href="https://www.linkedin.com/in/hsuan-ni-hsu/" target="_blank" rel="noopener noreferrer me"
        title="LinkedIn">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
    stroke-linecap="round" stroke-linejoin="round">
    <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path>
    <rect x="2" y="9" width="4" height="12"></rect>
    <circle cx="4" cy="4" r="2"></circle>
</svg>
    </a>
    <a href="mailto:sophy010017@gmail.com" target="_blank" rel="noopener noreferrer me"
        title="Email">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 21" fill="none" stroke="currentColor" stroke-width="2"
    stroke-linecap="round" stroke-linejoin="round">
    <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
    <polyline points="22,6 12,13 2,6"></polyline>
</svg>
    </a>
</div>

    </footer>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">æ¸…é™¤å†—é¤˜çš„Docker layers
    </h2>
  </header>
  <div class="entry-content">
    <p>å› ç‚ºå‰›æ›äº†ä¸€ä»½å…·æœ‰æŒ‘æˆ°æ€§çš„æ–°å·¥ä½œï¼Œæœ‰å¥½ä¸€é™£å­æ²’æœ‰ç™¼æ–‡äº†ï¼Œé›–ç„¶æ‰‹ä¸Šæœ‰å¹¾å€‹åœ¨é€²è¡Œçš„å­¸ç¿’æˆ–è€…projectï¼Œä½†é€²åº¦éƒ½é‚„æ²’åˆ°å¯ä»¥ç™¼è¡¨æ–‡ç« çš„ç¨‹åº¦ã€‚å‰›å¥½æœ€è¿‘å·¥ä½œä¸Šæœ‰ä¸€å€‹ä¹‹å‰æ²’ç¢°éçš„å•é¡Œï¼ŒèŠ±äº†ä¸€äº›æ™‚é–“åšè™•ç†ï¼Œå› æ­¤åœ¨é€™é‚Šç°¡å–®åœ°è¨˜éŒ„ä¸€ä¸‹ã€‚
å•é¡Œæ•˜è¿° åœ¨æŸå€‹ä¸Šç­æ—¥çš„ä¸‹åˆï¼Œç­†è€…çªç„¶æ”¶åˆ°ä¾†è‡ªå‰ç«¯å·¥ç¨‹å¸«çš„è¨Šæ¯ï¼Œåœ¨è·‘CI processæ™‚GitLab Runnerå¥½åƒå‡ºäº†å•é¡Œï¼Œå°è‡´pipeline failäº†ã€‚ç¶“æŸ¥è©¢å¾Œï¼Œç™¼ç¾æ˜¯è©²Runneræ‰€åœ¨çš„VM disk å®¹é‡å·²é”99.9%ï¼Œå·²ç¶“ä¸èƒ½å¤ å†pullä»»ä½•çš„imageä¸‹ä¾†äº†ã€‚
GitLab Runneråœ¨åŸ·è¡ŒCICD jobæ™‚ï¼Œæœƒpullè¨±å¤šæš«æ™‚çš„imageä¾†å®Œæˆä»»å‹™ã€‚åœ¨æ•å…¬å¸çš„æ¯ä¸€å°Runnerä¸­ï¼Œéƒ½æœ‰ä¸€å€‹å›ºå®šæ–¼æ¯æ—¥å‡Œæ™¨åŸ·è¡Œçš„cronjobä¾†æ¸…é™¤é€™äº›jobç”¢ç”Ÿå‡ºä¾†çš„imageã€volumeä»¥åŠbuild cacheç­‰ã€‚å› æ­¤åœ¨ä¸€é–‹å§‹ï¼Œç­†è€…æ‡·ç–‘cronjobæ˜¯å¦æ ¹æœ¬æ²’æœ‰å¦‚æœŸåŸ·è¡Œï¼Œå¾è€Œå¾€system logå»æŸ¥çœ‹ï¼Œæƒ³ç¢ºèªcronjobåŸ·è¡Œçš„ç‹€æ³ã€‚
ä¸æ–™ï¼Œcronjobçš„ç¢ºæœ‰åœ¨æŒ‡å®šçš„æ™‚é–“åŸ·è¡Œã€‚ä½†åƒ…å¾system logä¸¦æ²’æœ‰è¾¦æ³•å¾—çŸ¥æ›´è©³ç´°çš„è³‡è¨Šâ€”â€”ä¾‹å¦‚åŸ·è¡Œå‰çš„ç¡¬é«”å®¹é‡å¤šå°‘ï¼ŸåŸ·è¡Œå¾Œå¤šå°‘ï¼Ÿå¦‚æœcronjobç¢ºå¯¦æœ‰åšå®¹é‡çš„æ¸…é™¤ï¼Œé‚£éº¼ç¡¬ç¢Ÿæ»¿è¼‰çš„æƒ…æ³ä¸‹å¤§éƒ½åœ¨ä¸€å¤©ä¸­çš„ä½•æ™‚ç™¼ç”Ÿï¼ŸSREè©²å¦‚ä½•å³æ™‚å¾—çŸ¥é€™äº›è¨Šæ¯ï¼Ÿ
å¯ä»¥å¾ä»¥ä¸Šè³‡è¨Šå¾—çŸ¥ï¼ŒGitlab Runneræ‰€åœ¨çš„è™›æ“¬æ©Ÿç¼ºä¹ç›£æ§è¨­æ–½ï¼Œå°è‡´æˆ‘å€‘æ²’æœ‰è¾¦æ³•å³æ™‚ã€æœ‰æ•ˆåœ°ç²å¾—ç³»çµ±ç‹€æ³ï¼Œé€²è€Œåšå‡ºé©åˆçš„åˆ¤æ–·èˆ‡è§£æ±ºæ–¹æ¡ˆã€‚å› æ­¤ï¼Œå»ºç«‹ç³»çµ±çš„å¯è§€æ¸¬æ€§ä¾¿æ˜¯é–‹å§‹è§£æ±ºå•é¡Œçš„ç¬¬ä¸€æ­¥ã€‚
å»ºç«‹ç³»çµ±å¯è§€æ¸¬æ€§ï¼šæ”¶é›†ç³»çµ±æŒ‡æ¨™ æ•å…¬å¸çš„å…¶ä»–å°ˆæ¡ˆä½¿ç”¨Prometheus &#43; Grafanaä½œç‚ºä¸»è¦ç›£æ§å·¥å…·ä¹‹ä¸€ï¼Œåˆç­†è€…åªéœ€è¦ç›£æ§Linuxä¸­çš„ç³»çµ±æŒ‡æ¨™ï¼ŒPrometheuså·²æœ‰ç¾æˆçš„exporterå¯ä»¥åšä½¿ç”¨ã€‚ç¶œåˆè€ƒé‡ä¸‹ï¼Œç­†è€…åœ¨æ¯ä¸€å°Runnerèµ·äº†node_exporterçš„containerä»¥æ”¶é›†host-levelçš„metricsï¼Œå†ä½¿ç”¨Grafanaå»æ”¶é›†é€™äº›æŒ‡æ¨™ï¼Œç¹ªè£½æˆå¯è¦–åŒ–åœ–è¡¨ã€‚
åœ¨é€™é‚Šæä¸€å€‹å°é¡Œå¤–è©±ï¼Œç­†è€…å…ˆå‰ä¹Ÿæœ‰è‡ªå·±å¯¦ä½œéhost-levelçš„metrics exporterï¼Œåªä¸éç•¶æ™‚å–®ç´”åœ°èªç‚ºï¼Œå¦‚æœä½¿ç”¨containeréƒ¨ç½²é€™å€‹æœå‹™ï¼Œé‚£éº¼è§€å¯Ÿçš„æŒ‡æ¨™ä¸å°±åªé™æ–¼containerè£¡é¢äº†å—ï¼Ÿäº‹å¯¦ä¸Šï¼Œåœ¨è¬ç‰©çš†æª”æ¡ˆ(Everything is a file)çš„Linuxç•¶ä¸­ï¼Œæˆ‘å€‘å¯ä»¥åœ¨/procã€/sysç­‰ç›®éŒ„æ‰¾åˆ°CPUã€Memoryã€Diskç›¸é—œçš„è³‡è¨Šï¼Œå› æ­¤å¦‚æœæƒ³è§€å¯Ÿhostçš„æŒ‡æ¨™ï¼Œå°±åªéœ€è¦æŠŠhostçš„æª”æ¡ˆç›®éŒ„æ›è¼‰åˆ°containerä¸­å°±å¯ä»¥äº†ï¼
node_exporterçš„å®˜æ–¹GitHubä¸­å°±çµ¦äº†docker-compose.yamlçš„æœ€ä½³ç¯„ä¾‹ï¼š
--- version: &#39;3.8&#39; services: node_exporter: image: quay.io/prometheus/node-exporter:latest container_name: node_exporter command: - &#39;--path.rootfs=/host&#39; network_mode: host pid: host restart: unless-stopped volumes: - &#39;/:/host:ro,rslave&#39; åœ¨ç›£æ§èˆ‡å‘Šè­¦çš†æ¶è¨­å®Œæˆå¾Œï¼ˆé€™éƒ¨åˆ†å…¶å¯¦é‚„æœ‰ä¸€äº›ç´°ç¢çš„å°æ±è¥¿å¯ä»¥è«‡ï¼Œä¾‹å¦‚å‘Šè­¦çš„é–¾å€¼æ€éº¼è¨­ï¼Ÿè¦ç›£æ§å“ªäº›æŒ‡æ¨™ï¼Ÿå› ç‚ºæ€•åé›¢é‡é»ï¼Œå…ˆæš«ä¸”ä¸æï¼‰ï¼Œç­†è€…ç™¼ç¾ï¼Œåœ¨ä¸Šç­æ™‚é–“ï¼Œæ¯ä¸€å°Runnerçš„ç¡¬ç¢Ÿä½”ç”¨é‡å·²é”å…¨éƒ¨å®¹é‡çš„70~80%ï¼Œç´„æ˜¯400å¤šGBå·¦å³ï¼Œé‚£è‡ªç„¶æ˜¯æ’ä¸åˆ°åœ¨åŠå¤œåŸ·è¡Œçš„cronjobã€‚æ­¤å¤–ï¼Œå³ä¾¿ç­†è€…æ‰‹å‹•åŸ·è¡Œå®Œdocker system prune -a -fé€™å€‹å¯ä»¥æ¸…é™¤unused containerã€imageä»¥åŠbuilding cacheçš„æŒ‡ä»¤ï¼Œä¹Ÿåªæ¸…é™¤äº†80Gå·¦å³çš„å®¹é‡ã€‚
åŸºæœ¬ä¸Šï¼Œæ¯ä¸€å°Runneræ‰€åœ¨çš„è™›æ“¬æ©Ÿå°±åªæœ‰è£Runneré€™å€‹æ‡‰ç”¨ç¨‹å¼ï¼Œè€Œä¸”éƒ¨ç½²æ–¹å¼é‚„æ˜¯containerï¼Œæ€éº¼æœƒä½”ç”¨å¿«è¦400GBçš„å®¹é‡å‘¢ï¼Ÿ
æœ€å¾Œï¼Œé€éè³‡æ·±åŒäº‹çš„å¹«åŠ©ï¼Œä»¥ä¸‹åˆ—æŒ‡ä»¤ç™¼ç¾é€™é¾å¤§çš„é«”ç©ä¾†æºä¾†è‡ªæ–¼Dockerä¸‹é¢çš„overlay2è³‡æ–™å¤¾ã€‚å…‰æ˜¯é€™å€‹è³‡æ–™å¤¾å°±ä½”ç”¨äº†300å¤šGBã€‚
du -ch --max-depth=1 /datadrive/docker/ Docker v25å¾Œæ‰ä¿®å¾©çš„bug é›£é“æ˜¯é€£docker system pruneéƒ½æ²’æœ‰è¾¦æ³•æ¸…ç†overlayå—ï¼ŸéŒ¯äº†ï¼Œdocker system pruneé€™å€‹æŒ‡ä»¤å°±æ˜¯æ‹¿ä¾†æ¸…é™¤ä»»ä½•æš«åœçš„containerã€æ²’æœ‰åœ¨ä½¿ç”¨çš„network, images, build cacheã€‚ä¹‹æ‰€ä»¥æœƒæ²’è¾¦æ³•å®Œå…¨æ¸…é™¤ï¼Œæ˜¯å› ç‚ºé€™æ˜¯Docker v25ä»¥å‰çš„ä¸€å€‹bugï¼ˆå‰›å¥½æ•å…¬å¸ä½¿ç”¨çš„ç‰ˆæœ¬æ˜¯v24â€¦ï¼‰...</p>
  </div>
  <footer class="entry-footer"><span title='2024-10-03 20:13:00 +0800 CST'>October 3, 2024</span>&nbsp;Â·&nbsp;Hsuan-Ni Hsu</footer>
  <a class="entry-link" aria-label="post link to æ¸…é™¤å†—é¤˜çš„Docker layers" href="https://sophie0730.github.io/posts/2024/10/note-docker-overlay/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">è‡ªæ¶GitLab Runnerä¾†åŸ·è¡Œå–®å…ƒæ¸¬è©¦
    </h2>
  </header>
  <div class="entry-content">
    <p>æ¥ä¸‹ä¾†å³å°‡é€²å…¥çš„æ–°å…¬å¸èˆ‡è·ä½ï¼Œæœƒéœ€è¦å¤§é‡èˆ‡GitLab CIæ¥è§¸ï¼Œç‚ºäº†åšå¥½æº–å‚™ï¼Œé€™å¹¾å¤©èŠ±äº†äº›æ™‚é–“è‡ªå·±è·‘äº†ä¸€éCIæµç¨‹ã€‚
GitLab CI Process æ ¹æ“šGitLabå®˜æ–¹æ–‡ä»¶æ‰€è¿°ï¼Œæ‰€æœ‰CI/CDä»»å‹™çš„åŸ·è¡Œéƒ½å¿…é ˆä»°è³´gitlab-ci.ymlé€™å€‹æ–‡ä»¶ï¼š
To use GitLab CI/CD, you start with a .gitlab-ci.yml file at the root of your project. This file specifies the stages, jobs, and scripts to be executed during your CI/CD pipeline.
ç•¶å®šç¾©å¥½gitlab-ci.ymlå¾Œï¼Œæ•´å€‹GitLabåŸ·è¡ŒCI/CDçš„æµç¨‹å°±æœƒè®Šæˆï¼š
ç•¶æŒ‡å®šåˆ†æ”¯çš„ç¨‹å¼ç¢¼æ›´æ–°(commit or push or pull request) GitLabæ ¹æ“šgitlab-ci.ymlçš„å®šç¾©ï¼ŒåŒæ­¥å¹³è¡Œåœ°è§¸ç™¼job (ç·¨æŒ‰ï¼šåœ¨æ²’æœ‰ä»»ä½•å…¶ä»–è¨­å®šä¹‹ä¸‹ï¼Œjobéƒ½æ˜¯å¹³è¡ŒåŸ·è¡Œçš„ï¼Œé™¤éå¦å¤–åœ¨ymlè¨­å®šstageæˆ–è€…needsåƒæ•¸) GitLab serveræœƒå»æª¢æŸ¥æ¯å€‹jobæ‰€æŒ‡åçš„Runnerï¼Œä¸¦æŠŠjobåˆ†é…çµ¦é©ç•¶çš„RunneråŸ·è¡Œ RunneråŸ·è¡Œå¾Œçš„çµæœ(CI Logs)æœƒå›å‚³åˆ°GitLab serverï¼Œé¡¯ç¤ºæ–¼Pipelineä¸Š åœ¨æœ¬ç¯‡æ–‡ç« ä¸­ï¼Œæœƒé€ä¸€ä»‹ç´¹GitLabä¸­Runnerçš„ç¨®é¡ï¼Œä¸¦ä¸”å˜—è©¦è‡ªå®šç¾©Runnerï¼Œä¸¦åœ¨ä¸Šé¢é‹è¡Œå–®å…ƒæ¸¬è©¦ã€‚
GitLab Runner ç•¶GitLabåœ¨é‹è¡Œgitlab-ci.ymlä¸­å®šç¾©çš„Jobsæ™‚ï¼Œå¯¦éš›ä¸Šæ˜¯åœ¨GitLab Runnerä¸Šé‹ä½œçš„ã€‚åœ¨é€™è£¡ï¼ŒRunneråˆèƒ½æ ¹æ“šä½œç”¨ç¯„åœåˆ†ä½œä¸‰ç¨®é¡å‹ï¼Œåˆ†åˆ¥æ˜¯ï¼š
Shared Runner: åœ¨è©²GitLab serverä¸‹çš„æ‰€æœ‰groupæˆ–è€…projectéƒ½èƒ½å¤ ä½¿ç”¨ã€‚ç•¶æˆ‘å€‘å»ºç«‹projectæ™‚ï¼Œç³»çµ±æœƒè‡ªå‹•ç”¢ç”ŸShared Runnerï¼Œå¯ä»¥ç”¨ä¾†è™•ç†ç„¡æ¨™ç±¤(tag)çš„ä»»å‹™ã€‚ Group Runner: åªæœ‰åœ¨è©²groupä¸‹çš„æ‰€æœ‰projectå¯ä»¥ä½¿ç”¨ã€‚ Specific Runner: åªæœ‰åœ¨ç‰¹å®šçš„projectä¸‹å¯ä»¥è¢«ä½¿ç”¨ã€‚æœ¬æ¬¡æœƒä½¿ç”¨Specific Runnerä½œç‚ºå¯¦é©—ç¯„ä¾‹ã€‚ Executor é€™æ™‚ï¼ŒRunneræœƒæ ¹æ“šæˆ‘å€‘é¸æ“‡çš„Executoræ±ºå®šè¦æ¡ç”¨ä½•ç¨®æ–¹å¼èˆ‡å·¥ä½œç’°å¢ƒä¾†å®ŒæˆCI Jobã€‚æ›è¨€ä¹‹ï¼Œä¸€å€‹Runnerå¯ä»¥è¢«å…è¨±æ“æœ‰å¤šå€‹executorï¼Œè®“ä¸€å€‹Jobèƒ½é‹è¡Œåœ¨å¤šç¨®ç’°å¢ƒä¹‹ä¸­ã€‚...</p>
  </div>
  <footer class="entry-footer"><span title='2024-07-30 07:13:00 +0800 CST'>July 30, 2024</span>&nbsp;Â·&nbsp;Hsuan-Ni Hsu</footer>
  <a class="entry-link" aria-label="post link to è‡ªæ¶GitLab Runnerä¾†åŸ·è¡Œå–®å…ƒæ¸¬è©¦" href="https://sophie0730.github.io/posts/2024/07/gitlab-ci/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">2024 06æœˆä»½è®€æ›¸ç‹€æ…‹å›é¡§
    </h2>
  </header>
  <div class="entry-content">
    <p>å‰é™£å­ç™¼ç¾ä¸€ç›´æœ‰åœ¨é—œæ³¨çš„éƒ¨è½æ ¼ä½œè€…ï¼Œæœƒåœ¨è‡ªå·±çš„éƒ¨è½æ ¼åˆ†äº«æ¯å€‹æœˆçš„å­¸ç¿’å›é¡§ï¼Œè¦ºå¾—é€™æ˜¯å¾ˆå¥½çš„è‡ªçœæ–¹å¼ï¼Œæ‰€ä»¥ä¹Ÿæƒ³è¦è·Ÿè‘—åšã€‚
æœ¬æœˆé‡é» é€™å€‹æœˆä¸»è¦å°ˆæ³¨æº–å‚™AWS SAA-C03è­‰ç…§ï¼Œä¸­é–“æœ‰è·‘å»CNTUGç”³è«‹LABä¾†è©¦è‘—æ¶æ¶çœ‹Kubernetesï¼Œé€éHelmæ¶è¨­Prometheus&#43;Grafanaä¾†ç›£æ§clusterä¸Šé¢é‹è¡Œçš„æœå‹™ï¼Œä¹Ÿæœ‰å¯«ä¸€é»Pythonï¼Œåˆ·leetcodeé˜²æ­¢å¤±æ™ºã€‚
å¿…é ˆè¦æª¢è¨çš„æ˜¯ï¼Œé€™å€‹æœˆé™¤äº†è­‰ç…§ä»¥å¤–ï¼Œä¸¦æ²’æœ‰è¨‚å®šæ˜ç¢ºçš„è®€æ›¸è¨ˆç•«ï¼Œå¯èƒ½ä¹Ÿè·Ÿæˆ‘é€™å€‹æœˆå…¶å¯¦å¾ˆè¿·æƒ˜ï¼Œåˆ°åº•è¦å¾€é–‹ç™¼é‚„æ˜¯å¾€SREèµ°æœ‰é—œï¼Œå°±è®Šæˆç”šéº¼éƒ½ç¢°ä¸€é»ã€‚æ‰€ä»¥æ•´å€‹å…­æœˆåªæœ‰è€ƒåˆ°è­‰ç…§é€™ä»¶äº‹ç®—æ˜¯æœ‰æ”¶ç©«ã€‚
AWS Solutions Architect - Associate é€™å¼µè­‰ç…§ç¸½å…±èŠ±è²»ä¸‰å‘¨æ™‚é–“é€²è¡Œæº–å‚™ã€‚æˆ‘åƒè€ƒçš„æ˜¯Udemyä¸Šçš„çŸ¥åèª²ç¨‹ Ultimate AWS Certified Solutions Architect Associate SAA-C03 æ­é…EXAMTOPICSçš„è€ƒå¤é¡Œåšæº–å‚™ã€‚
å¤§ç´„èŠ±äº†ä¸€å‘¨æ™‚é–“æŠŠUdemyèª²ç¨‹ä¸Šå®Œï¼Œç¬¬äºŒå‘¨é–‹å§‹é‚Šåˆ·é¡Œé‚Šæª¢è¨ï¼Œç¬¬ä¸‰å‘¨é–‹å§‹æ¨¡æ“¬è€ƒè©¦æƒ…å¢ƒï¼Œæ¯æ¬¡é€£çºŒå¯«65é¡Œä¸¦è¨ˆæ™‚ã€ç®—åˆ†ï¼Œå†ä»”ç´°æª¢è¨é¡Œç›®ï¼Œä¸¦ä¸”èˆ‡ä¹‹å‰å­¸ç¿’åˆ°çš„è§€å¿µåšå°ç…§èˆ‡è£œå……ã€‚
åœ¨ç­†è¨˜éƒ¨ä»½æˆ‘ä½¿ç”¨Heptabaseï¼Œé€™å€‹ç­†è¨˜è»Ÿé«”ä¹‹å‰å°±æœ‰è½èï¼Œä½†æ„Ÿè¦ºæ“ä½œèµ·ä¾†è »è¤‡é›œçš„å°±ä¸€ç›´æ²’æœ‰æƒ³è¦ä½¿ç”¨ï¼Œç›´åˆ°çœ‹åˆ°AppWorks SchoolåŒå­¸çš„æ¨å‘æ–‡ï¼Œå¯¦éš›ä½¿ç”¨ä¹‹å¾Œä¹Ÿç®—æ»¿æ„ï¼Œéå¸¸é©åˆæº–å‚™SAAé€™ç¨®çŸ¥è­˜æ¯”è¼ƒé›¶æ•£ï¼Œä½†è§£é¡Œæ™‚åˆéœ€è¦çµ„ç¹”é€™äº›é›¶æ•£çŸ¥è­˜çš„è€ƒè©¦ã€‚
é«”æ„Ÿä¸Šä¾†èªªï¼ŒSAAèˆ‡å…¶èªªæ˜¯è€ƒä½ å„å€‹æœå‹™çš„ç‰¹æ€§ï¼Œä¸å¦‚æ¯”è¼ƒåƒæ˜¯è€ƒä½ ã€Œè¦å¦‚ä½•è²¼åˆå®¢æˆ¶éœ€æ±‚ï¼Œé‹ç”¨AWSæœå‹™è¨­è¨ˆæ¶æ§‹ï¼Œè§£æ±ºç•¶å‰å•é¡Œã€ï¼Œå› æ­¤æˆ‘è¦ºå¾—é›–ç„¶å¾ˆå¤šäººèªªåˆ·é¡Œå°±å¥½ï¼Œä½†å¯«é¡Œç›®çœ‹ç­”æ¡ˆçš„æ™‚å€™é‚„æ˜¯è¦å•è‡ªå·±ã€Œç‚ºä»€éº¼é€™å€‹æ­£ç¢ºç­”æ¡ˆè¦é€™æ¨£è¨­è¨ˆï¼Ÿã€å› ç‚ºå¯¦éš›é€²è€ƒå ´å¾ŒçœŸæ­£æœ‰å¯«åˆ°é‡è¤‡çš„è€ƒå¤é¡Œä¸¦ä¸å¤šï¼Œä½†è§€å¿µå…¶å¯¦éƒ½æ˜¯é¡ä¼¼çš„ã€‚
å„˜ç®¡è€ƒéè­‰ç…§ï¼Œä½†è‡ªèªé‚„æ˜¯ç¼ºä¹å¯¦ä½œä¸Šçš„ç¶“é©—ï¼Œå‰›å¥½ä¸‹å€‹æœˆæœƒæœ‰ä¸€äº›å¯¦åšå°ˆæ¡ˆçš„æ©Ÿæœƒï¼Œå¦‚æœæŠŠå°ˆæ¡ˆä¸Ÿåˆ°AWSä¸Šæˆ–è¨±èƒ½æœ‰æ›´å¤šçš„æ”¶ç©«ã€‚
ä¸‹æœˆé‡é» å…¶å¯¦ä»¥æ™‚é–“é»ä¾†çœ‹å·²ç¶“æ˜¯é€™å€‹æœˆäº†â€¦å› ç‚ºé¢è©¦éƒ½é›†ä¸­åœ¨ä¸ƒæœˆå‰åŠæ®µï¼Œå› æ­¤å®‰æ’å¦‚ä¸‹
ä¸ƒæœˆä¸­å‰ï¼š
é¢è©¦ä½œæ¥­ï¼Œæº–å‚™é¢è©¦ è³‡æ–™çµæ§‹æ¼”ç®—æ³•(Binary Tree, Graphs, Backtracking, DP) ä¸ƒæœˆä¸­å¾Œï¼š
missing semester of your CS education(çœ‹å®Œ) æ¸…å¤§è¨ˆç®—æ©Ÿç¶²è·¯æ¦‚è«–(æœ‰é–‹å§‹å°±å¥½) æ¯æ—¥é€²åº¦ç´°é … å…­æœˆä»½å…±æœ‰6å¤©æ²’æœ‰è®€æ›¸ã€‚
6/1 åƒåŠ Docker Workshopï¼Œå›å®¶å¾Œæ•´ç†ç­†è¨˜
6/2 ä½¿ç”¨Golangå¯¦ä½œç°¡å–®çš„containerï¼Œä¸¦ç™¼è¡¨éƒ¨è½æ ¼æ–‡ç« 
6/3 Golang web serveræ¶è¨­&#43;æ’°å¯«éƒ¨è½æ ¼æ–‡ç« 
6/4 Golang web server practice
6/5 AWS EC2
6/6 AWS ELB &amp; ASG
6/7 ç«¯åˆç¯€å®¶æ—æ—…éŠ
6/8 ç«¯åˆç¯€å®¶æ—æ—…éŠ
6/9 ç«¯åˆç¯€å®¶æ—æ—…éŠ...</p>
  </div>
  <footer class="entry-footer"><span title='2024-07-03 14:30:04 +0800 CST'>July 3, 2024</span>&nbsp;Â·&nbsp;Hsuan-Ni Hsu</footer>
  <a class="entry-link" aria-label="post link to 2024 06æœˆä»½è®€æ›¸ç‹€æ…‹å›é¡§" href="https://sophie0730.github.io/posts/2024/07/2024_6_review/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">ä½¿ç”¨kubesprayåœ¨OpenStackä¸Šæ­å»ºkubernetes cluster
    </h2>
  </header>
  <div class="entry-content">
    <p>å…ˆå‰åƒåŠ SRE Conferenceæ™‚ï¼Œèªè­˜äº†CNTUG(Cloud Native Taiwan User Group)é€™å€‹é–‹æºç¤¾ç¾¤ï¼Œé™¤äº†æ¨å»£é›²ç«¯åŸç”Ÿçš„ç›¸é—œæŠ€è¡“ä»¥å¤–ï¼Œä¹Ÿæä¾›Labè®“å¤§å®¶èƒ½å¤ ç”³è«‹ã€åœ¨ä¸Šé¢åšä¸€äº›å¾ˆé›£åœ¨è‡ªå·±æœ¬æ©Ÿä¸Šé¢çš„å¯¦é©—(ä¾‹å¦‚kubernetes clusterçš„å»ºç«‹)ï¼Œå¾ˆå¹¸é‹åœ°å‰é™£å­éäº¤çš„Labç”³è«‹é€šéäº†ï¼Œå°±ä¹Ÿæ‰“ç®—ä¾†å¯«ä¸€ç¯‡æ–‡ç« è¨˜éŒ„æ•´å€‹å¯¦é©—çš„æ¶è¨­èˆ‡å¿ƒå¾—ã€‚
ç’°å¢ƒæº–å‚™ åƒè€ƒäº†CNTUGç¶²ç«™èˆ‡kuberneteså®˜æ–¹ç¶²ç«™ä¸Šé¢é—œæ–¼VMç¡¬é«”æ¢ä»¶çš„æ–‡ä»¶ï¼Œé€™æ¬¡åœ¨openstackä¸Šæ¶äº†å››å°VMï¼Œä¸€å°bastion hostã€ä¸€å°control plane(m0)ã€å…©å°worker node(n0, n1)ã€‚ å››å°VMåˆ†åˆ¥çš„ç¡¬é«”æ¢ä»¶å¦‚ä¸‹ï¼š
IP Address Server Name Role CPU Ram OS 192.168.200.100 bastion-host Bastion Host 2 2G Ubuntu 22.04 192.168.200.101 k8s-m0 Master Node - 0 4 4G Ubuntu 22.04 192.168.200.102 k8s-n0 Worker Node - 0 4 4G Ubuntu 22.04 192.168.200.103 k8s-n1 Worker Node - 1 4 4G Ubuntu 22.04 ç¶²è·¯è¨­å®š æº–å‚™å…©å¼µç¶²å¡ï¼špublicèˆ‡privateã€‚æœ¬å¯¦é©—ç’°å¢ƒæœƒå°‡kubernetes clusteréƒ½æ”¾åœ¨å…§ç¶²ï¼Œåƒ…è®“bastion hoståšå°å¤–çš„é€£ç·šã€‚
åœ¨æ‹¿åˆ°openstackçš„å¸³è™Ÿæ™‚ï¼Œpublicç¶²å¡å·²ç¶“å…ˆå¹«æˆ‘å€‘å»ºç«‹å¥½äº†ï¼Œæ¥ä¸‹ä¾†è¦è‡ªå·±æ‰‹å‹•æ–°å¢å…§ç¶²ï¼Œä¸¦ä¸”èƒ½è®“å…§ç¶²å»é€£æ¥åˆ°å¤–ç¶²ã€‚åœ¨è¨­å®šå…§ç¶²æ™‚ï¼Œè¨˜å¾—å‹¾é¸ã€Œå•Ÿç”¨DHCPã€è®“æ¯å€‹åŠ é€²é€™å€‹ç¶²è·¯çš„VMéƒ½æœƒè¢«è‡ªå‹•åˆ†é…åˆ°å”¯ä¸€çš„ipä½å€ã€‚
Public Network: Public IPv4: 103.122.XXX.0/23 Private Network: å­ç¶²è·¯åç¨±ï¼šprivate-net ç¶²è·¯ä½å€ï¼š192....</p>
  </div>
  <footer class="entry-footer"><span title='2024-06-22 23:30:04 +0800 CST'>June 22, 2024</span>&nbsp;Â·&nbsp;Hsuan-Ni Hsu</footer>
  <a class="entry-link" aria-label="post link to ä½¿ç”¨kubesprayåœ¨OpenStackä¸Šæ­å»ºkubernetes cluster" href="https://sophie0730.github.io/posts/2024/06/build_a_cluster_by_kubespray/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">å‹•æ‰‹ç”¨Golangå¯¦ä½œä¸€å€‹container - å¯¦ä½œç¯‡
    </h2>
  </header>
  <div class="entry-content">
    <p>ä¾†å¯¦ä½œä¸€å€‹containerå§ å»¶çºŒä¸Šç¯‡çš„å‹•æ‰‹ç”¨Golangå¯¦ä½œä¸€å€‹container - æ¦‚å¿µç¯‡ï¼Œäº†è§£containerçš„åº•å±¤æŠ€è¡“æ˜¯å¦‚ä½•å¯¦è¸ä¹‹å¾Œï¼Œæˆ‘å€‘å°±å¯ä»¥é–‹å§‹ä½¿ç”¨Golangä¾†åšå‡ºå±¬æ–¼æˆ‘å€‘è‡ªå·±çš„containeräº†ã€‚
ä»¥Dockerç‚ºä¾‹ï¼Œç•¶æˆ‘å€‘è¦å•Ÿå‹•ä¸€å€‹containerçš„æ™‚å€™ï¼Œæœƒä½¿ç”¨é€™å€‹æŒ‡ä»¤ï¼š
docker container run &lt;image-name&gt; [cmd] ä»¥æ­¤ç‚ºç™¼æƒ³é»ï¼Œç•¶æˆ‘æƒ³è¦ä½¿ç”¨æˆ‘çš„ç¨‹å¼ç¢¼å•Ÿå‹•containeræ™‚ï¼Œä»–é•·å¾—æœƒåƒé€™æ¨£å­ï¼š
go run main.go run [cmd] åœ¨é€™è£¡ï¼Œæˆ‘å€‘æœƒåˆ†åˆ¥å®šç¾©å…©ç¨®functionï¼š
run() : parent processè¦åŸ·è¡Œçš„functionã€‚è² è²¬å‰µå»ºchild processåŠä¸¦é…ç½®å…¶é‹è¡Œçš„ç’°å¢ƒï¼ˆå¦‚namespaceï¼‰ã€‚ child() : child processè¦åŸ·è¡Œçš„functionã€‚è² è²¬ç®¡ç†åœ¨containerç’°å¢ƒä¸­ï¼Œè¦å¦‚ä½•é‹è¡Œç”¨æˆ¶ç«¯æ‰€æŒ‡å®šçš„å‘½ä»¤ã€‚ è€Œmust()functionå‰‡æœƒä½œç‚ºerror handlerä½¿ç”¨ã€‚
func main() { switch os.Args[1] { case &#34;run&#34;: run() case &#34;child&#34;: child(); default: panic(&#34;what??&#34;) } } func must(err error) { if err != nil { panic(err) } } é€™é‚Šé‚„è »æƒ³æä¸€ä¸‹os.Argsé€™å€‹æŒ‡ä»¤ã€‚os.Args æ˜¯Golangè£¡é¢ç”¨ä¾†å„²å­˜å‘½ä»¤è¡Œåƒæ•¸çš„ä¸€å€‹è®Šæ•¸ã€‚å¦‚æœæˆ‘å€‘åªå–®å°å‡ºos.Argsï¼Œä»–æœƒé•·çš„åƒé€™æ¨£ï¼š
sophie@Sophie-Desktop:~/go-container$ go run test.go run echo &#39;hi&#39; [/tmp/go-build3547203082/b001/exe/test run echo hi] ç¬¬ä¸€è¡Œæ˜¯æˆ‘åŸ·è¡ŒGoç¨‹å¼ç¢¼çš„æŒ‡ä»¤ï¼Œç¬¬äºŒè¡Œæ˜¯os.Argså°å‡ºä¾†çš„çµæœã€‚åˆ°é€™è£¡æœƒç™¼ç¾ç‚ºä»€éº¼go run test....</p>
  </div>
  <footer class="entry-footer"><span title='2024-06-03 19:30:04 +0800 CST'>June 3, 2024</span>&nbsp;Â·&nbsp;Hsuan-Ni Hsu</footer>
  <a class="entry-link" aria-label="post link to å‹•æ‰‹ç”¨Golangå¯¦ä½œä¸€å€‹container - å¯¦ä½œç¯‡" href="https://sophie0730.github.io/posts/2024/06/build_container_by_go_practice/"></a>
</article>
<footer class="page-footer">
  <nav class="pagination">
    <a class="next" href="https://sophie0730.github.io/page/2/">Next&nbsp;&nbsp;Â»
    </a>
  </nav>
</footer>
    </main>
    
<footer class="footer">
        <span>&copy; 2024 <a href="https://sophie0730.github.io/">Hsuan-Ni&#39;s blog</a></span> Â· 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
